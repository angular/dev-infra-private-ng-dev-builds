/**
 * @license
 * Copyright Google LLC
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
import { createPullRequestValidation, PullRequestValidation } from './validation-config.js';
/** Assert the pull request has completed all requested reviews. */
export const minimumReviewsValidation = createPullRequestValidation({ name: 'assertMinimumReviews', canBeForceIgnored: false }, () => Validation);
class Validation extends PullRequestValidation {
    assert(pullRequest) {
        const totalCount = pullRequest.reviews.nodes.filter(({ authorAssociation }) => authorAssociation === 'MEMBER').length;
        if (totalCount === 0) {
            throw this._createError(`Pull request cannot be merged without at least one review from a team member`);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXJ0LW1pbmltdW0tcmV2aWV3cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL25nLWRldi9wci9jb21tb24vdmFsaWRhdGlvbi9hc3NlcnQtbWluaW11bS1yZXZpZXdzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7R0FNRztBQUdILE9BQU8sRUFBQywyQkFBMkIsRUFBRSxxQkFBcUIsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTFGLG1FQUFtRTtBQUNuRSxNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBRywyQkFBMkIsQ0FDakUsRUFBQyxJQUFJLEVBQUUsc0JBQXNCLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFDLEVBQ3hELEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FDakIsQ0FBQztBQUVGLE1BQU0sVUFBVyxTQUFRLHFCQUFxQjtJQUM1QyxNQUFNLENBQUMsV0FBa0M7UUFDdkMsTUFBTSxVQUFVLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUNqRCxDQUFDLEVBQUMsaUJBQWlCLEVBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLEtBQUssUUFBUSxDQUN4RCxDQUFDLE1BQU0sQ0FBQztRQUNULElBQUksVUFBVSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3JCLE1BQU0sSUFBSSxDQUFDLFlBQVksQ0FDckIsOEVBQThFLENBQy9FLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTENcbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbmltcG9ydCB7UHVsbFJlcXVlc3RGcm9tR2l0aHVifSBmcm9tICcuLi9mZXRjaC1wdWxsLXJlcXVlc3QuanMnO1xuaW1wb3J0IHtjcmVhdGVQdWxsUmVxdWVzdFZhbGlkYXRpb24sIFB1bGxSZXF1ZXN0VmFsaWRhdGlvbn0gZnJvbSAnLi92YWxpZGF0aW9uLWNvbmZpZy5qcyc7XG5cbi8qKiBBc3NlcnQgdGhlIHB1bGwgcmVxdWVzdCBoYXMgY29tcGxldGVkIGFsbCByZXF1ZXN0ZWQgcmV2aWV3cy4gKi9cbmV4cG9ydCBjb25zdCBtaW5pbXVtUmV2aWV3c1ZhbGlkYXRpb24gPSBjcmVhdGVQdWxsUmVxdWVzdFZhbGlkYXRpb24oXG4gIHtuYW1lOiAnYXNzZXJ0TWluaW11bVJldmlld3MnLCBjYW5CZUZvcmNlSWdub3JlZDogZmFsc2V9LFxuICAoKSA9PiBWYWxpZGF0aW9uLFxuKTtcblxuY2xhc3MgVmFsaWRhdGlvbiBleHRlbmRzIFB1bGxSZXF1ZXN0VmFsaWRhdGlvbiB7XG4gIGFzc2VydChwdWxsUmVxdWVzdDogUHVsbFJlcXVlc3RGcm9tR2l0aHViKSB7XG4gICAgY29uc3QgdG90YWxDb3VudCA9IHB1bGxSZXF1ZXN0LnJldmlld3Mubm9kZXMuZmlsdGVyKFxuICAgICAgKHthdXRob3JBc3NvY2lhdGlvbn0pID0+IGF1dGhvckFzc29jaWF0aW9uID09PSAnTUVNQkVSJyxcbiAgICApLmxlbmd0aDtcbiAgICBpZiAodG90YWxDb3VudCA9PT0gMCkge1xuICAgICAgdGhyb3cgdGhpcy5fY3JlYXRlRXJyb3IoXG4gICAgICAgIGBQdWxsIHJlcXVlc3QgY2Fubm90IGJlIG1lcmdlZCB3aXRob3V0IGF0IGxlYXN0IG9uZSByZXZpZXcgZnJvbSBhIHRlYW0gbWVtYmVyYCxcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iXX0=