/**
 * @license
 * Copyright Google LLC
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
import { actionLabels } from '../labels/index.js';
import { createPullRequestValidation, PullRequestValidation } from './validation-config.js';
/** Assert the pull request is merge ready. */
// TODO: update typings to make sure portability is properly handled for windows build.
export const mergeReadyValidation = createPullRequestValidation({ name: 'assertMergeReady', canBeForceIgnored: false }, () => Validation);
class Validation extends PullRequestValidation {
    assert(pullRequest) {
        if (pullRequest.isDraft) {
            throw this._createError('Pull request is still a draft.');
        }
        if (!pullRequest.labels.nodes.some(({ name }) => name === actionLabels.ACTION_MERGE.name)) {
            throw this._createError('Pull request is not marked as merge ready.');
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXJ0LW1lcmdlLXJlYWR5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbmctZGV2L3ByL2NvbW1vbi92YWxpZGF0aW9uL2Fzc2VydC1tZXJnZS1yZWFkeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0dBTUc7QUFHSCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFDaEQsT0FBTyxFQUFDLDJCQUEyQixFQUFFLHFCQUFxQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFMUYsOENBQThDO0FBQzlDLHVGQUF1RjtBQUN2RixNQUFNLENBQUMsTUFBTSxvQkFBb0IsR0FBRywyQkFBMkIsQ0FDN0QsRUFBQyxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFDLEVBQ3BELEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FDakIsQ0FBQztBQUVGLE1BQU0sVUFBVyxTQUFRLHFCQUFxQjtJQUM1QyxNQUFNLENBQUMsV0FBa0M7UUFDdkMsSUFBSSxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDeEIsTUFBTSxJQUFJLENBQUMsWUFBWSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7UUFDNUQsQ0FBQztRQUNELElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFDLElBQUksRUFBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEtBQUssWUFBWSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQ3hGLE1BQU0sSUFBSSxDQUFDLFlBQVksQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO1FBQ3hFLENBQUM7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQ1xuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuaW1wb3J0IHtQdWxsUmVxdWVzdEZyb21HaXRodWJ9IGZyb20gJy4uL2ZldGNoLXB1bGwtcmVxdWVzdC5qcyc7XG5pbXBvcnQge2FjdGlvbkxhYmVsc30gZnJvbSAnLi4vbGFiZWxzL2luZGV4LmpzJztcbmltcG9ydCB7Y3JlYXRlUHVsbFJlcXVlc3RWYWxpZGF0aW9uLCBQdWxsUmVxdWVzdFZhbGlkYXRpb259IGZyb20gJy4vdmFsaWRhdGlvbi1jb25maWcuanMnO1xuXG4vKiogQXNzZXJ0IHRoZSBwdWxsIHJlcXVlc3QgaXMgbWVyZ2UgcmVhZHkuICovXG4vLyBUT0RPOiB1cGRhdGUgdHlwaW5ncyB0byBtYWtlIHN1cmUgcG9ydGFiaWxpdHkgaXMgcHJvcGVybHkgaGFuZGxlZCBmb3Igd2luZG93cyBidWlsZC5cbmV4cG9ydCBjb25zdCBtZXJnZVJlYWR5VmFsaWRhdGlvbiA9IGNyZWF0ZVB1bGxSZXF1ZXN0VmFsaWRhdGlvbihcbiAge25hbWU6ICdhc3NlcnRNZXJnZVJlYWR5JywgY2FuQmVGb3JjZUlnbm9yZWQ6IGZhbHNlfSxcbiAgKCkgPT4gVmFsaWRhdGlvbixcbik7XG5cbmNsYXNzIFZhbGlkYXRpb24gZXh0ZW5kcyBQdWxsUmVxdWVzdFZhbGlkYXRpb24ge1xuICBhc3NlcnQocHVsbFJlcXVlc3Q6IFB1bGxSZXF1ZXN0RnJvbUdpdGh1Yikge1xuICAgIGlmIChwdWxsUmVxdWVzdC5pc0RyYWZ0KSB7XG4gICAgICB0aHJvdyB0aGlzLl9jcmVhdGVFcnJvcignUHVsbCByZXF1ZXN0IGlzIHN0aWxsIGEgZHJhZnQuJyk7XG4gICAgfVxuICAgIGlmICghcHVsbFJlcXVlc3QubGFiZWxzLm5vZGVzLnNvbWUoKHtuYW1lfSkgPT4gbmFtZSA9PT0gYWN0aW9uTGFiZWxzLkFDVElPTl9NRVJHRS5uYW1lKSkge1xuICAgICAgdGhyb3cgdGhpcy5fY3JlYXRlRXJyb3IoJ1B1bGwgcmVxdWVzdCBpcyBub3QgbWFya2VkIGFzIG1lcmdlIHJlYWR5LicpO1xuICAgIH1cbiAgfVxufVxuIl19