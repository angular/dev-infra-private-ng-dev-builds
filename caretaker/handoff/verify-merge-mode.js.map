{"version":3,"file":"verify-merge-mode.js","sourceRoot":"","sources":["verify-merge-mode.ts"],"names":[],"mappings":"AASA,OAAO,EAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAC,MAAM,qBAAqB,CAAC;AAC1D,OAAO,EAAC,MAAM,EAAC,MAAM,oBAAoB,CAAC;AAC1C,OAAO,EAAC,mBAAmB,EAAE,gBAAgB,EAAC,MAAM,uCAAuC,CAAC;AAE5F,MAAM,CAAC,KAAK,UAAU,eAAe,CAAC,YAAkC;IACtE,MAAM,IAAI,GAAG,MAAM,mBAAmB,EAAE,CAAC;IACzC,IAAI,IAAI,KAAK,YAAY,EAAE,CAAC;QAC1B,OAAO,IAAI,CAAC;IACd,CAAC;IAED,GAAG,CAAC,IAAI,CAAC,0CAA0C,IAAI,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC;IAClG,IACE,MAAM,MAAM,CAAC,OAAO,CAAC;QACnB,OAAO,EAAE,mCAAmC,YAAY,EAAE;QAC1D,OAAO,EAAE,IAAI;KACd,CAAC,EACF,CAAC;QACD,IAAI,CAAC;YACH,MAAM,gBAAgB,CAAC,YAAY,CAAC,CAAC;YACrC,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,kCAAkC,YAAY,EAAE,CAAC,CAAC;YACxE,OAAO,IAAI,CAAC;QACd,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;YACpD,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACd,OAAO,KAAK,CAAC;QACf,CAAC;IACH,CAAC;IAED,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACxB,OAAO,KAAK,CAAC;AACf,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {RepositoryMergeModes} from '../../utils/config';\nimport {bold, green, Log, red} from '../../utils/logging';\nimport {Prompt} from '../../utils/prompt';\nimport {getCurrentMergeMode, setRepoMergeMode} from '../../utils/git/repository-merge-mode';\n\nexport async function verifyMergeMode(expectedMode: RepositoryMergeModes): Promise<boolean> {\n  const mode = await getCurrentMergeMode();\n  if (mode === expectedMode) {\n    return true;\n  }\n\n  Log.info(`The repository merge-mode is currently ${bold(mode)} and must be reset before handoff`);\n  if (\n    await Prompt.confirm({\n      message: `Would you like to reset this to ${expectedMode}`,\n      default: true,\n    })\n  ) {\n    try {\n      await setRepoMergeMode(expectedMode);\n      Log.info(`${green('✔')} Successfuly set merge-mode to ${expectedMode}`);\n      return true;\n    } catch (err) {\n      Log.info(`${red('✘')} Failed to update merge-mode`);\n      Log.info(err);\n      return false;\n    }\n  }\n  // User chose not to reset merge-mode\n  Log.info('Aborting...');\n  return false;\n}\n"]}