{"version":3,"file":"cli.js","sourceRoot":"","sources":["cli.ts"],"names":[],"mappings":"AASA,OAAO,EAAC,GAAG,EAAC,MAAM,qBAAqB,CAAC;AACxC,OAAO,EAAC,oBAAoB,EAAC,MAAM,8BAA8B,CAAC;AAClE,OAAO,EAAC,mBAAmB,EAAC,MAAM,WAAW,CAAC;AAC9C,OAAO,EAAC,cAAc,EAAC,MAAM,SAAS,CAAC;AACvC,OAAO,EAAC,mBAAmB,EAAC,MAAM,uCAAuC,CAAC;AAM1E,KAAK,UAAU,mBAAmB,CAAC,IAAU;IAC3C,OAAO,oBAAoB,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,MAAM,EAAE;QACnD,IAAI,EAAE,QAAQ;QACd,OAAO,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;KAC9B,CAAC,CAAC;AACL,CAAC;AAED,KAAK,UAAU,mBAAmB,CAAC,EAAC,IAAI,EAAqB;IAC3D,IAAI,IAAI,KAAK,SAAS,EAAE,CAAC;QACvB,MAAM,WAAW,GAAG,MAAM,mBAAmB,EAAE,CAAC;QAChD,GAAG,CAAC,IAAI,CAAC,8CAA8C,WAAW,EAAE,CAAC,CAAC;QACtE,OAAO;IACT,CAAC;IACD,IAAI,IAAI,KAAK,OAAO,EAAE,CAAC;QACrB,OAAO,MAAM,cAAc,EAAE,CAAC;IAChC,CAAC;IACD,IAAI,IAAI,KAAK,SAAS,EAAE,CAAC;QACvB,OAAO,MAAM,mBAAmB,EAAE,CAAC;IACrC,CAAC;IACD,GAAG,CAAC,KAAK,CAAC,sDAAsD,IAAI,EAAE,CAAC,CAAC;AAC1E,CAAC;AAED,MAAM,CAAC,MAAM,eAAe,GAA0B;IACpD,OAAO,EAAE,mBAAmB;IAC5B,OAAO,EAAE,mBAAmB;IAC5B,OAAO,EAAE,CAAC,mBAAmB,CAAC;IAC9B,QAAQ,EAAE,+BAA+B;CAC1C,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Argv, Arguments, CommandModule} from 'yargs';\nimport {Log} from '../../utils/logging';\nimport {addGithubTokenOption} from '../../utils/git/github-yargs';\nimport {setMergeModeRelease} from './release';\nimport {resetMergeMode} from './reset';\nimport {getCurrentMergeMode} from '../../utils/git/repository-merge-mode';\n\ninterface Options {\n  mode?: string;\n}\n\nasync function setMergeModeBuilder(argv: Argv): Promise<Argv<Options>> {\n  return addGithubTokenOption(argv).positional('mode', {\n    type: 'string',\n    choices: ['release', 'reset'],\n  });\n}\n\nasync function setMergeModeHandler({mode}: Arguments<Options>) {\n  if (mode === undefined) {\n    const currentMode = await getCurrentMergeMode();\n    Log.info(`Repository merge-mode is currently set to: ${currentMode}`);\n    return;\n  }\n  if (mode === 'reset') {\n    return await resetMergeMode();\n  }\n  if (mode === 'release') {\n    return await setMergeModeRelease();\n  }\n  Log.error(`Unable to set the merge mode to the provided mode: ${mode}`);\n}\n\nexport const MergeModeModule: CommandModule<{}, {}> = {\n  builder: setMergeModeBuilder,\n  handler: setMergeModeHandler,\n  command: ['merge-mode [mode]'],\n  describe: 'Set the repository merge mode',\n};\n"]}