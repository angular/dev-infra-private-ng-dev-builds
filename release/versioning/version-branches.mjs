/**
 * @license
 * Copyright Google LLC
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
import semver from 'semver';
/** Regular expression that matches version-branches. */
const versionBranchNameRegex = /^(\d+)\.(\d+)\.x$/;
/** Field in `package.json` that is used to indicate an in-progress exceptional minor. */
export const exceptionalMinorPackageIndicator = '__ngDevExceptionalMinor__';
/**
 * Gets the name of the next branch from the Github configuration.
 *
 * Note that there is a clear separation between the main branch of the
 * upstream remote repository and the `next` release-train branch.
 */
export function getNextBranchName(github) {
    return github.mainBranchName;
}
/** Gets the version info for a branch by reading the `package.json` upstream. */
export async function getVersionInfoForBranch(repo, branchName) {
    const { data } = await repo.api.repos.getContent({
        owner: repo.owner,
        repo: repo.name,
        path: '/package.json',
        ref: branchName,
    });
    // Workaround for: https://github.com/octokit/rest.js/issues/32.
    // TODO: Remove cast once types of Octokit `getContent` are fixed.
    const content = data.content;
    if (!content) {
        throw Error(`Unable to read "package.json" file from repository.`);
    }
    const pkgJson = JSON.parse(Buffer.from(content, 'base64').toString());
    const parsedVersion = semver.parse(pkgJson.version);
    if (parsedVersion === null) {
        throw Error(`Invalid version detected in following branch: ${branchName}.`);
    }
    return {
        version: parsedVersion,
        isExceptionalMinor: pkgJson[exceptionalMinorPackageIndicator] === true,
    };
}
/** Whether the given branch corresponds to a version branch. */
export function isVersionBranch(branchName) {
    return versionBranchNameRegex.test(branchName);
}
/**
 * Gets the version branches for the specified major versions in descending
 * order. i.e. latest version branches first.
 */
export async function getBranchesForMajorVersions(repo, majorVersions) {
    const branchData = await repo.api.paginate(repo.api.repos.listBranches, {
        owner: repo.owner,
        repo: repo.name,
        protected: true,
    });
    const branches = [];
    for (const { name } of branchData) {
        if (!isVersionBranch(name)) {
            continue;
        }
        // Convert the version-branch into a SemVer version that can be used with the
        // SemVer utilities. e.g. to determine semantic order, compare versions.
        const parsed = convertVersionBranchToSemVer(name);
        // Collect all version-branches that match the specified major versions.
        if (parsed !== null && majorVersions.includes(parsed.major)) {
            branches.push({ name, parsed });
        }
    }
    // Sort captured version-branches in descending order.
    return branches.sort((a, b) => semver.rcompare(a.parsed, b.parsed));
}
/**
 * Converts a given version-branch into a SemVer version that can be used with SemVer
 * utilities. e.g. to determine semantic order, extract major digit, compare.
 *
 * For example `10.0.x` will become `10.0.0` in SemVer. The patch digit is not
 * relevant but needed for parsing. SemVer does not allow `x` as patch digit.
 */
export function convertVersionBranchToSemVer(branchName) {
    return semver.parse(branchName.replace(versionBranchNameRegex, '$1.$2.0'));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVyc2lvbi1icmFuY2hlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25nLWRldi9yZWxlYXNlL3ZlcnNpb25pbmcvdmVyc2lvbi1icmFuY2hlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0dBTUc7QUFFSCxPQUFPLE1BQU0sTUFBTSxRQUFRLENBQUM7QUFJNUIsd0RBQXdEO0FBQ3hELE1BQU0sc0JBQXNCLEdBQUcsbUJBQW1CLENBQUM7QUFFbkQseUZBQXlGO0FBQ3pGLE1BQU0sQ0FBQyxNQUFNLGdDQUFnQyxHQUFHLDJCQUFvQyxDQUFDO0FBbUNyRjs7Ozs7R0FLRztBQUNILE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxNQUFvQjtJQUNwRCxPQUFPLE1BQU0sQ0FBQyxjQUFjLENBQUM7QUFDL0IsQ0FBQztBQUVELGlGQUFpRjtBQUNqRixNQUFNLENBQUMsS0FBSyxVQUFVLHVCQUF1QixDQUMzQyxJQUF3QixFQUN4QixVQUFrQjtJQUVsQixNQUFNLEVBQUMsSUFBSSxFQUFDLEdBQUcsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUM7UUFDN0MsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO1FBQ2pCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtRQUNmLElBQUksRUFBRSxlQUFlO1FBQ3JCLEdBQUcsRUFBRSxVQUFVO0tBQ2hCLENBQUMsQ0FBQztJQUNILGdFQUFnRTtJQUNoRSxrRUFBa0U7SUFDbEUsTUFBTSxPQUFPLEdBQUksSUFBMkIsQ0FBQyxPQUFPLENBQUM7SUFDckQsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2IsTUFBTSxLQUFLLENBQUMscURBQXFELENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBQ0QsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBZ0IsQ0FBQztJQUNyRixNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNwRCxJQUFJLGFBQWEsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUMzQixNQUFNLEtBQUssQ0FBQyxpREFBaUQsVUFBVSxHQUFHLENBQUMsQ0FBQztJQUM5RSxDQUFDO0lBQ0QsT0FBTztRQUNMLE9BQU8sRUFBRSxhQUFhO1FBQ3RCLGtCQUFrQixFQUFFLE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQyxLQUFLLElBQUk7S0FDdkUsQ0FBQztBQUNKLENBQUM7QUFFRCxnRUFBZ0U7QUFDaEUsTUFBTSxVQUFVLGVBQWUsQ0FBQyxVQUFrQjtJQUNoRCxPQUFPLHNCQUFzQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNqRCxDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsTUFBTSxDQUFDLEtBQUssVUFBVSwyQkFBMkIsQ0FDL0MsSUFBd0IsRUFDeEIsYUFBdUI7SUFFdkIsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUU7UUFDdEUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO1FBQ2pCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtRQUNmLFNBQVMsRUFBRSxJQUFJO0tBQ2hCLENBQUMsQ0FBQztJQUNILE1BQU0sUUFBUSxHQUFvQixFQUFFLENBQUM7SUFFckMsS0FBSyxNQUFNLEVBQUMsSUFBSSxFQUFDLElBQUksVUFBVSxFQUFFLENBQUM7UUFDaEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQzNCLFNBQVM7UUFDWCxDQUFDO1FBQ0QsNkVBQTZFO1FBQzdFLHdFQUF3RTtRQUN4RSxNQUFNLE1BQU0sR0FBRyw0QkFBNEIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsRCx3RUFBd0U7UUFDeEUsSUFBSSxNQUFNLEtBQUssSUFBSSxJQUFJLGFBQWEsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDNUQsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFDLElBQUksRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7SUFDSCxDQUFDO0lBRUQsc0RBQXNEO0lBQ3RELE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUN0RSxDQUFDO0FBRUQ7Ozs7OztHQU1HO0FBQ0gsTUFBTSxVQUFVLDRCQUE0QixDQUFDLFVBQWtCO0lBQzdELE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLHNCQUFzQixFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDN0UsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG5pbXBvcnQgc2VtdmVyIGZyb20gJ3NlbXZlcic7XG5pbXBvcnQge0dpdGh1YkNsaWVudCwgR2l0aHViUmVwb30gZnJvbSAnLi4vLi4vdXRpbHMvZ2l0L2dpdGh1Yi5qcyc7XG5pbXBvcnQge0dpdGh1YkNvbmZpZ30gZnJvbSAnLi4vLi4vdXRpbHMvY29uZmlnLmpzJztcblxuLyoqIFJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IG1hdGNoZXMgdmVyc2lvbi1icmFuY2hlcy4gKi9cbmNvbnN0IHZlcnNpb25CcmFuY2hOYW1lUmVnZXggPSAvXihcXGQrKVxcLihcXGQrKVxcLngkLztcblxuLyoqIEZpZWxkIGluIGBwYWNrYWdlLmpzb25gIHRoYXQgaXMgdXNlZCB0byBpbmRpY2F0ZSBhbiBpbi1wcm9ncmVzcyBleGNlcHRpb25hbCBtaW5vci4gKi9cbmV4cG9ydCBjb25zdCBleGNlcHRpb25hbE1pbm9yUGFja2FnZUluZGljYXRvciA9ICdfX25nRGV2RXhjZXB0aW9uYWxNaW5vcl9fJyBhcyBjb25zdDtcblxuLyoqIE9iamVjdCBkZXNjcmliaW5nIGEgcmVwb3NpdG9yeSB0aGF0IGNhbiBiZSByZWxlYXNlZCwgdG9nZXRoZXIgd2l0aCBhbiBBUEkgY2xpZW50LiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWxlYXNlUmVwb1dpdGhBcGkgZXh0ZW5kcyBHaXRodWJSZXBvIHtcbiAgLyoqIEFQSSBjbGllbnQgdGhhdCBjYW4gYWNjZXNzIHRoZSByZXBvc2l0b3J5LiAqL1xuICBhcGk6IEdpdGh1YkNsaWVudDtcbiAgLyoqIE5hbWUgb2YgdGhlIG5leHQgYnJhbmNoLiAqL1xuICBuZXh0QnJhbmNoTmFtZTogc3RyaW5nO1xufVxuXG4vKiogVHlwZSBkZXNjcmliaW5nIGEgdmVyc2lvbi1icmFuY2guICovXG5leHBvcnQgaW50ZXJmYWNlIFZlcnNpb25CcmFuY2gge1xuICAvKiogTmFtZSBvZiB0aGUgYnJhbmNoIGluIEdpdC4gZS5nLiBgMTAuMC54YC4gKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogUGFyc2VkIFNlbVZlciB2ZXJzaW9uIGZvciB0aGUgdmVyc2lvbi1icmFuY2guIFZlcnNpb24gYnJhbmNoZXMgdGVjaG5pY2FsbHkgZG9cbiAgICogbm90IGZvbGxvdyB0aGUgU2VtVmVyIGZvcm1hdCwgYnV0IHdlIGNhbiBoYXZlIHJlcHJlc2VudGF0aXZlIFNlbVZlciB2ZXJzaW9uc1xuICAgKiB0aGF0IGNhbiBiZSB1c2VkIGZvciBjb21wYXJpc29ucywgc29ydGluZyBhbmQgb3RoZXIgY2hlY2tzLlxuICAgKi9cbiAgcGFyc2VkOiBzZW12ZXIuU2VtVmVyO1xufVxuXG4vKiogRGVzY3JpYmVzIHRoZSBjb25jcmV0ZSB2ZXJzaW9uIG9mIGEgdmVyc2lvbiBicmFuY2guICovXG5leHBvcnQgaW50ZXJmYWNlIFZlcnNpb25JbmZvIHtcbiAgdmVyc2lvbjogc2VtdmVyLlNlbVZlcjtcbiAgaXNFeGNlcHRpb25hbE1pbm9yOiBib29sZWFuO1xufVxuXG4vKiogVHlwZSBkZXNjcmliaW5nIHRoZSBwYXJzZWQgY29udGVudHMgb2YgYSBgcGFja2FnZS5qc29uYC4gKi9cbmV4cG9ydCB0eXBlIFBhY2thZ2VKc29uID0ge1xuICB2ZXJzaW9uOiBzdHJpbmc7XG4gIFtleGNlcHRpb25hbE1pbm9yUGFja2FnZUluZGljYXRvcl0/OiBib29sZWFuO1xuICBbb3RoZXJVbmtub3duRmllbGRzOiBzdHJpbmddOiB1bmtub3duO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBuYW1lIG9mIHRoZSBuZXh0IGJyYW5jaCBmcm9tIHRoZSBHaXRodWIgY29uZmlndXJhdGlvbi5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlcmUgaXMgYSBjbGVhciBzZXBhcmF0aW9uIGJldHdlZW4gdGhlIG1haW4gYnJhbmNoIG9mIHRoZVxuICogdXBzdHJlYW0gcmVtb3RlIHJlcG9zaXRvcnkgYW5kIHRoZSBgbmV4dGAgcmVsZWFzZS10cmFpbiBicmFuY2guXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0QnJhbmNoTmFtZShnaXRodWI6IEdpdGh1YkNvbmZpZyk6IHN0cmluZyB7XG4gIHJldHVybiBnaXRodWIubWFpbkJyYW5jaE5hbWU7XG59XG5cbi8qKiBHZXRzIHRoZSB2ZXJzaW9uIGluZm8gZm9yIGEgYnJhbmNoIGJ5IHJlYWRpbmcgdGhlIGBwYWNrYWdlLmpzb25gIHVwc3RyZWFtLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFZlcnNpb25JbmZvRm9yQnJhbmNoKFxuICByZXBvOiBSZWxlYXNlUmVwb1dpdGhBcGksXG4gIGJyYW5jaE5hbWU6IHN0cmluZyxcbik6IFByb21pc2U8VmVyc2lvbkluZm8+IHtcbiAgY29uc3Qge2RhdGF9ID0gYXdhaXQgcmVwby5hcGkucmVwb3MuZ2V0Q29udGVudCh7XG4gICAgb3duZXI6IHJlcG8ub3duZXIsXG4gICAgcmVwbzogcmVwby5uYW1lLFxuICAgIHBhdGg6ICcvcGFja2FnZS5qc29uJyxcbiAgICByZWY6IGJyYW5jaE5hbWUsXG4gIH0pO1xuICAvLyBXb3JrYXJvdW5kIGZvcjogaHR0cHM6Ly9naXRodWIuY29tL29jdG9raXQvcmVzdC5qcy9pc3N1ZXMvMzIuXG4gIC8vIFRPRE86IFJlbW92ZSBjYXN0IG9uY2UgdHlwZXMgb2YgT2N0b2tpdCBgZ2V0Q29udGVudGAgYXJlIGZpeGVkLlxuICBjb25zdCBjb250ZW50ID0gKGRhdGEgYXMge2NvbnRlbnQ/OiBzdHJpbmd9KS5jb250ZW50O1xuICBpZiAoIWNvbnRlbnQpIHtcbiAgICB0aHJvdyBFcnJvcihgVW5hYmxlIHRvIHJlYWQgXCJwYWNrYWdlLmpzb25cIiBmaWxlIGZyb20gcmVwb3NpdG9yeS5gKTtcbiAgfVxuICBjb25zdCBwa2dKc29uID0gSlNPTi5wYXJzZShCdWZmZXIuZnJvbShjb250ZW50LCAnYmFzZTY0JykudG9TdHJpbmcoKSkgYXMgUGFja2FnZUpzb247XG4gIGNvbnN0IHBhcnNlZFZlcnNpb24gPSBzZW12ZXIucGFyc2UocGtnSnNvbi52ZXJzaW9uKTtcbiAgaWYgKHBhcnNlZFZlcnNpb24gPT09IG51bGwpIHtcbiAgICB0aHJvdyBFcnJvcihgSW52YWxpZCB2ZXJzaW9uIGRldGVjdGVkIGluIGZvbGxvd2luZyBicmFuY2g6ICR7YnJhbmNoTmFtZX0uYCk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2ZXJzaW9uOiBwYXJzZWRWZXJzaW9uLFxuICAgIGlzRXhjZXB0aW9uYWxNaW5vcjogcGtnSnNvbltleGNlcHRpb25hbE1pbm9yUGFja2FnZUluZGljYXRvcl0gPT09IHRydWUsXG4gIH07XG59XG5cbi8qKiBXaGV0aGVyIHRoZSBnaXZlbiBicmFuY2ggY29ycmVzcG9uZHMgdG8gYSB2ZXJzaW9uIGJyYW5jaC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZlcnNpb25CcmFuY2goYnJhbmNoTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiB2ZXJzaW9uQnJhbmNoTmFtZVJlZ2V4LnRlc3QoYnJhbmNoTmFtZSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgdmVyc2lvbiBicmFuY2hlcyBmb3IgdGhlIHNwZWNpZmllZCBtYWpvciB2ZXJzaW9ucyBpbiBkZXNjZW5kaW5nXG4gKiBvcmRlci4gaS5lLiBsYXRlc3QgdmVyc2lvbiBicmFuY2hlcyBmaXJzdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJyYW5jaGVzRm9yTWFqb3JWZXJzaW9ucyhcbiAgcmVwbzogUmVsZWFzZVJlcG9XaXRoQXBpLFxuICBtYWpvclZlcnNpb25zOiBudW1iZXJbXSxcbik6IFByb21pc2U8VmVyc2lvbkJyYW5jaFtdPiB7XG4gIGNvbnN0IGJyYW5jaERhdGEgPSBhd2FpdCByZXBvLmFwaS5wYWdpbmF0ZShyZXBvLmFwaS5yZXBvcy5saXN0QnJhbmNoZXMsIHtcbiAgICBvd25lcjogcmVwby5vd25lcixcbiAgICByZXBvOiByZXBvLm5hbWUsXG4gICAgcHJvdGVjdGVkOiB0cnVlLFxuICB9KTtcbiAgY29uc3QgYnJhbmNoZXM6IFZlcnNpb25CcmFuY2hbXSA9IFtdO1xuXG4gIGZvciAoY29uc3Qge25hbWV9IG9mIGJyYW5jaERhdGEpIHtcbiAgICBpZiAoIWlzVmVyc2lvbkJyYW5jaChuYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdGhlIHZlcnNpb24tYnJhbmNoIGludG8gYSBTZW1WZXIgdmVyc2lvbiB0aGF0IGNhbiBiZSB1c2VkIHdpdGggdGhlXG4gICAgLy8gU2VtVmVyIHV0aWxpdGllcy4gZS5nLiB0byBkZXRlcm1pbmUgc2VtYW50aWMgb3JkZXIsIGNvbXBhcmUgdmVyc2lvbnMuXG4gICAgY29uc3QgcGFyc2VkID0gY29udmVydFZlcnNpb25CcmFuY2hUb1NlbVZlcihuYW1lKTtcbiAgICAvLyBDb2xsZWN0IGFsbCB2ZXJzaW9uLWJyYW5jaGVzIHRoYXQgbWF0Y2ggdGhlIHNwZWNpZmllZCBtYWpvciB2ZXJzaW9ucy5cbiAgICBpZiAocGFyc2VkICE9PSBudWxsICYmIG1ham9yVmVyc2lvbnMuaW5jbHVkZXMocGFyc2VkLm1ham9yKSkge1xuICAgICAgYnJhbmNoZXMucHVzaCh7bmFtZSwgcGFyc2VkfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU29ydCBjYXB0dXJlZCB2ZXJzaW9uLWJyYW5jaGVzIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gIHJldHVybiBicmFuY2hlcy5zb3J0KChhLCBiKSA9PiBzZW12ZXIucmNvbXBhcmUoYS5wYXJzZWQsIGIucGFyc2VkKSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBnaXZlbiB2ZXJzaW9uLWJyYW5jaCBpbnRvIGEgU2VtVmVyIHZlcnNpb24gdGhhdCBjYW4gYmUgdXNlZCB3aXRoIFNlbVZlclxuICogdXRpbGl0aWVzLiBlLmcuIHRvIGRldGVybWluZSBzZW1hbnRpYyBvcmRlciwgZXh0cmFjdCBtYWpvciBkaWdpdCwgY29tcGFyZS5cbiAqXG4gKiBGb3IgZXhhbXBsZSBgMTAuMC54YCB3aWxsIGJlY29tZSBgMTAuMC4wYCBpbiBTZW1WZXIuIFRoZSBwYXRjaCBkaWdpdCBpcyBub3RcbiAqIHJlbGV2YW50IGJ1dCBuZWVkZWQgZm9yIHBhcnNpbmcuIFNlbVZlciBkb2VzIG5vdCBhbGxvdyBgeGAgYXMgcGF0Y2ggZGlnaXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VmVyc2lvbkJyYW5jaFRvU2VtVmVyKGJyYW5jaE5hbWU6IHN0cmluZyk6IHNlbXZlci5TZW1WZXIgfCBudWxsIHtcbiAgcmV0dXJuIHNlbXZlci5wYXJzZShicmFuY2hOYW1lLnJlcGxhY2UodmVyc2lvbkJyYW5jaE5hbWVSZWdleCwgJyQxLiQyLjAnKSk7XG59XG4iXX0=