{"version":3,"file":"restore-commit-message.js","sourceRoot":"","sources":["restore-commit-message.ts"],"names":[],"mappings":"AAQA,OAAO,EAAC,aAAa,EAAC,MAAM,IAAI,CAAC;AAEjC,OAAO,EAAC,GAAG,EAAC,MAAM,wBAAwB,CAAC;AAE3C,OAAO,EAAC,sBAAsB,EAAC,MAAM,2BAA2B,CAAC;AASjE,MAAM,UAAU,oBAAoB,CAAC,QAAgB,EAAE,MAAwB;IAC7E,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;QACb,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACzB,GAAG,CAAC,KAAK,CAAC,4EAA4E,CAAC,CAAC;QAC1F,CAAC;QACD,IAAI,MAAM,KAAK,UAAU,EAAE,CAAC;YAC1B,GAAG,CAAC,KAAK,CAAC,kFAAkF,CAAC,CAAC;QAChG,CAAC;QACD,IAAI,MAAM,KAAK,QAAQ,EAAE,CAAC;YACxB,GAAG,CAAC,KAAK,CAAC,+EAA+E,CAAC,CAAC;QAC7F,CAAC;QACD,IAAI,MAAM,KAAK,QAAQ,EAAE,CAAC;YACxB,GAAG,CAAC,KAAK,CACP,qFAAqF,CACtF,CAAC;YACF,GAAG,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;QAClC,CAAC;QACD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IAED,MAAM,aAAa,GAAG,sBAAsB,CAAC,QAAQ,CAAC,CAAC;IAGvD,IAAI,aAAa,EAAE,CAAC;QAClB,aAAa,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;IACzC,CAAC;IAED,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAClB,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {writeFileSync} from 'fs';\n\nimport {Log} from '../../utils/logging.js';\n\nimport {loadCommitMessageDraft} from './commit-message-draft.js';\nimport {CommitMsgSource} from './commit-message-source.js';\n\n/**\n * Restore the commit message draft to the git to be used as the default commit message.\n *\n * The source provided may be one of the sources described in\n *   https://git-scm.com/docs/githooks#_prepare_commit_msg\n */\nexport function restoreCommitMessage(filePath: string, source?: CommitMsgSource) {\n  if (!!source) {\n    if (source === 'message') {\n      Log.debug('A commit message was already provided via the command with a -m or -F flag');\n    }\n    if (source === 'template') {\n      Log.debug('A commit message was already provided via the -t flag or config.template setting');\n    }\n    if (source === 'squash') {\n      Log.debug('A commit message was already provided as a merge action or via .git/MERGE_MSG');\n    }\n    if (source === 'commit') {\n      Log.debug(\n        'A commit message was already provided through a revision specified via --fixup, -c,',\n      );\n      Log.debug('-C or --amend flag');\n    }\n    process.exit(0);\n  }\n  /** A draft of a commit message. */\n  const commitMessage = loadCommitMessageDraft(filePath);\n\n  // If the commit message draft has content, restore it into the provided filepath.\n  if (commitMessage) {\n    writeFileSync(filePath, commitMessage);\n  }\n  // Exit the process\n  process.exit(0);\n}\n"]}