{"version":3,"file":"staged.js","sourceRoot":"","sources":["staged.ts"],"names":[],"mappings":"AAUA,OAAO,EAAC,SAAS,EAAC,MAAM,4BAA4B,CAAC;AACrD,OAAO,EAAC,UAAU,EAAE,WAAW,EAAC,MAAM,aAAa,CAAC;AAQpD,SAAS,OAAO,CAAC,IAAU;IACzB,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;QAC1B,IAAI,EAAE,SAAS;QACf,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;QACzC,WAAW,EAAE,wEAAwE;KACtF,CAAC,CAAC;AACL,CAAC;AAGD,KAAK,UAAU,OAAO,CAAC,EAAC,KAAK,EAAqB;IAChD,MAAM,GAAG,GAAG,MAAM,SAAS,CAAC,GAAG,EAAE,CAAC;IAClC,MAAM,YAAY,GAAG,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC;IACtD,MAAM,cAAc,GAAG,GAAG,CAAC,cAAc,EAAE,CAAC;IAC5C,OAAO,CAAC,QAAQ,GAAG,MAAM,YAAY,CAAC,cAAc,CAAC,CAAC;IACtD,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC,QAAQ,KAAK,CAAC,EAAE,CAAC;QACrC,GAAG,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,GAAG,cAAc,CAAC,CAAC,CAAC;IAC9C,CAAC;AACH,CAAC;AAGD,MAAM,CAAC,MAAM,YAAY,GAA+B;IACtD,OAAO;IACP,OAAO;IACP,OAAO,EAAE,QAAQ;IACjB,QAAQ,EAAE,uCAAuC;CAClD,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Argv, Arguments, CommandModule} from 'yargs';\n\nimport {GitClient} from '../utils/git/git-client.js';\nimport {checkFiles, formatFiles} from './format.js';\n\n/** Command line options. */\nexport interface Options {\n  check: boolean;\n}\n\n/** Yargs command builder for the command. */\nfunction builder(argv: Argv): Argv<Options> {\n  return argv.option('check', {\n    type: 'boolean',\n    default: process.env['CI'] ? true : false,\n    description: 'Run the formatter to check formatting rather than updating code format',\n  });\n}\n\n/** Yargs command handler for the command. */\nasync function handler({check}: Arguments<Options>) {\n  const git = await GitClient.get();\n  const executionCmd = check ? checkFiles : formatFiles;\n  const allStagedFiles = git.allStagedFiles();\n  process.exitCode = await executionCmd(allStagedFiles);\n  if (!check && process.exitCode === 0) {\n    git.runGraceful(['add', ...allStagedFiles]);\n  }\n}\n\n/** CLI command module. */\nexport const StagedModule: CommandModule<{}, Options> = {\n  builder,\n  handler,\n  command: 'staged',\n  describe: 'Run the formatter on all staged files',\n};\n"]}