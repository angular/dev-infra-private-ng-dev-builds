/**
 * @license
 * Copyright Google LLC
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
import { checkFiles, formatFiles } from './format.js';
import glob from 'fast-glob';
/** Yargs command builder for the command. */
function builder(argv) {
    return argv
        .option('check', {
        type: 'boolean',
        default: process.env['CI'] ? true : false,
        description: 'Run the formatter to check formatting rather than updating code format',
    })
        .positional('files', { array: true, type: 'string', demandOption: true });
}
/** Yargs command handler for the command. */
async function handler({ files, check }) {
    const expandedFiles = glob.sync(files.map((file) => file.replace(/\/...$/, '/**/*')), { onlyFiles: true });
    const executionCmd = check ? checkFiles : formatFiles;
    process.exitCode = await executionCmd(expandedFiles);
}
/** CLI command module. */
export const FilesModule = {
    builder,
    handler,
    command: 'files <files..>',
    describe: 'Run the formatter on provided files',
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9uZy1kZXYvZm9ybWF0L2ZpbGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7R0FNRztBQUlILE9BQU8sRUFBQyxVQUFVLEVBQUUsV0FBVyxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBQ3BELE9BQU8sSUFBSSxNQUFNLFdBQVcsQ0FBQztBQVE3Qiw2Q0FBNkM7QUFDN0MsU0FBUyxPQUFPLENBQUMsSUFBVTtJQUN6QixPQUFPLElBQUk7U0FDUixNQUFNLENBQUMsT0FBTyxFQUFFO1FBQ2YsSUFBSSxFQUFFLFNBQVM7UUFDZixPQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLO1FBQ3pDLFdBQVcsRUFBRSx3RUFBd0U7S0FDdEYsQ0FBQztTQUNELFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7QUFDNUUsQ0FBQztBQUVELDZDQUE2QztBQUM3QyxLQUFLLFVBQVUsT0FBTyxDQUFDLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBcUI7SUFDdkQsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FDN0IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUMsRUFDcEQsRUFBQyxTQUFTLEVBQUUsSUFBSSxFQUFDLENBQ2xCLENBQUM7SUFDRixNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDO0lBQ3RELE9BQU8sQ0FBQyxRQUFRLEdBQUcsTUFBTSxZQUFZLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDdkQsQ0FBQztBQUVELDBCQUEwQjtBQUMxQixNQUFNLENBQUMsTUFBTSxXQUFXLEdBQStCO0lBQ3JELE9BQU87SUFDUCxPQUFPO0lBQ1AsT0FBTyxFQUFFLGlCQUFpQjtJQUMxQixRQUFRLEVBQUUscUNBQXFDO0NBQ2hELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQ1xuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuaW1wb3J0IHtBcmd2LCBBcmd1bWVudHMsIENvbW1hbmRNb2R1bGV9IGZyb20gJ3lhcmdzJztcblxuaW1wb3J0IHtjaGVja0ZpbGVzLCBmb3JtYXRGaWxlc30gZnJvbSAnLi9mb3JtYXQuanMnO1xuaW1wb3J0IGdsb2IgZnJvbSAnZmFzdC1nbG9iJztcblxuLyoqIENvbW1hbmQgbGluZSBvcHRpb25zLiAqL1xuZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcbiAgZmlsZXM6IHN0cmluZ1tdO1xuICBjaGVjazogYm9vbGVhbjtcbn1cblxuLyoqIFlhcmdzIGNvbW1hbmQgYnVpbGRlciBmb3IgdGhlIGNvbW1hbmQuICovXG5mdW5jdGlvbiBidWlsZGVyKGFyZ3Y6IEFyZ3YpOiBBcmd2PE9wdGlvbnM+IHtcbiAgcmV0dXJuIGFyZ3ZcbiAgICAub3B0aW9uKCdjaGVjaycsIHtcbiAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgIGRlZmF1bHQ6IHByb2Nlc3MuZW52WydDSSddID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgZGVzY3JpcHRpb246ICdSdW4gdGhlIGZvcm1hdHRlciB0byBjaGVjayBmb3JtYXR0aW5nIHJhdGhlciB0aGFuIHVwZGF0aW5nIGNvZGUgZm9ybWF0JyxcbiAgICB9KVxuICAgIC5wb3NpdGlvbmFsKCdmaWxlcycsIHthcnJheTogdHJ1ZSwgdHlwZTogJ3N0cmluZycsIGRlbWFuZE9wdGlvbjogdHJ1ZX0pO1xufVxuXG4vKiogWWFyZ3MgY29tbWFuZCBoYW5kbGVyIGZvciB0aGUgY29tbWFuZC4gKi9cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoe2ZpbGVzLCBjaGVja306IEFyZ3VtZW50czxPcHRpb25zPikge1xuICBjb25zdCBleHBhbmRlZEZpbGVzID0gZ2xvYi5zeW5jKFxuICAgIGZpbGVzLm1hcCgoZmlsZSkgPT4gZmlsZS5yZXBsYWNlKC9cXC8uLi4kLywgJy8qKi8qJykpLFxuICAgIHtvbmx5RmlsZXM6IHRydWV9LFxuICApO1xuICBjb25zdCBleGVjdXRpb25DbWQgPSBjaGVjayA/IGNoZWNrRmlsZXMgOiBmb3JtYXRGaWxlcztcbiAgcHJvY2Vzcy5leGl0Q29kZSA9IGF3YWl0IGV4ZWN1dGlvbkNtZChleHBhbmRlZEZpbGVzKTtcbn1cblxuLyoqIENMSSBjb21tYW5kIG1vZHVsZS4gKi9cbmV4cG9ydCBjb25zdCBGaWxlc01vZHVsZTogQ29tbWFuZE1vZHVsZTx7fSwgT3B0aW9ucz4gPSB7XG4gIGJ1aWxkZXIsXG4gIGhhbmRsZXIsXG4gIGNvbW1hbmQ6ICdmaWxlcyA8ZmlsZXMuLj4nLFxuICBkZXNjcmliZTogJ1J1biB0aGUgZm9ybWF0dGVyIG9uIHByb3ZpZGVkIGZpbGVzJyxcbn07XG4iXX0=